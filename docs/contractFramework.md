---
id: framework
title: 智能合约框架
sidebar_label: 智能合约框架
---

## 概览

DODO V2 由多合约构成，以实现包括建公开池、私有池，众筹建池，流动性管理，智能交易路由以及会员体系与治理等一系列的核心功能。如下图为整体合约框架概览

![](https://dodoex.github.io/cn/img/dodo_framework_v2.png)

## 代币授权（DODOApprove）

DODO V2 从合约架构上抽象出唯一的用户授权合约（`DODOApprove`）。对于不同种类的代币，用户仅需要授权一次，后续即可顺畅的执行已授权代币的交易、流动性管理等操作。
`DODOApprove`作为平台的业务交互入口，有助于用户对代币授权的安全管理。同时`DODOApprove`也被我们加上了时间锁机制，当我们升级`DODOProxy`，或添加其他功能合约时，时间锁机制会确保该操作冷却3天，留有足够的时间向社区公示合约调整，以提升`DODOApprove`的信任。

## 统一代理（DODOV2Proxy）

`DODOV2Proxy` 是用户大多数时间交互的合约对象，集成了平台的智能交易路由，创建公开池，私有池，众筹池，以及流动性管理等功能。同时内部实现了交易端的gas补贴，交易挖矿奖励等业务功能，并帮助用户实现了WETH与ETH的互转，这一切均是隐性功能，目的是更好的提升用户交易体验，并尽可能的降低交易成本。

## 工厂合约

工厂合约主要包括三大类，`DPPFactory`（私有池工厂合约）、`DVMFactory`（公开池工厂合约）、`CrowdPoolingFactory`（众筹池工厂合约）。他们的功能包括一键创建不同类型的池子，同时池子地址会被注册在工厂合约内，充当平台的注册表，是DODO平台创建的池子唯一检索源。

## 其他

当前注册在`DODOApprove` 的合约除了`DODOV2Proxy`，还包括另外两个合约

### 代币BSC映射

币安智能链（BSC）作为我们当前的二层扩容解决方案，需要`DODO`代币迁移，以支持BSC上的业务运转。我们采取通用的代币映射方式，即在以太坊主网锁定代币，BSC铸造等量代币，以保证`DODO`总量不变，且在两个网络可自由流通。`DODOMigrationToBSC` 的作用是锁定用户以太坊`DODO`，以在BSC上铸造，实现用户的代币网络迁移。

### DODO会员代币

`vODDO` 是平台的会员治理代币，用户通过存入`DODO`以铸造出`vDODO`，以享受平台后续的会员福利，以及获取`DODO`的区块派发奖励。同时也是平台后续治理的投票权利。